<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cafe, The Art of Moments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Noto+Sans+KR:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-bg: #1a1a1a;
            --light-text: #f0f0f0;
            --accent-color: #d4af37; /* Gold accent */
        }
        body {
            background-color: var(--dark-bg);
            color: var(--light-text);
            font-family: 'Noto Sans KR', sans-serif;
            overscroll-behavior: none;
            overflow-x: hidden;
        }
        .font-serif-display {
            font-family: 'Playfair Display', serif;
        }
        .section {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .section-full {
            height: 100vh;
        }
        .section-long {
            height: 200vh;
        }
        .section-horizontal-container {
            width: 400vw;
            height: 100vh;
            display: flex;
            flex-wrap: nowrap;
        }
        .panel {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            position: relative;
            background-size: cover;
            background-position: center;
            padding: 5vw;
        }
        .text-outline {
            -webkit-text-stroke: 1px var(--light-text);
            color: transparent;
            transition: color 0.5s ease;
        }
        .text-outline:hover {
            color: var(--light-text);
        }
        /* Hero Section 3D Card Stack */
        #hero-section {
            perspective: 1000px;
        }
        .card {
            position: absolute;
            width: 300px;
            height: 400px;
            background-size: cover;
            background-position: center;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
            will-change: transform;
            border: 2px solid rgba(255,255,255,0.2);
            transition: transform 0.5s, box-shadow 0.5s;
        }
        .card:hover {
            transform: scale(1.05) !important;
            box-shadow: 0 0 30px 5px var(--accent-color);
        }
        /* Bean Cloud Section */
        .bean {
            position: absolute;
            width: 80px;
            height: 80px;
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        /* Horizontal Scroll Gallery */
        .gallery-image {
            width: 25vw;
            height: 35vw;
            max-width: 400px;
            max-height: 600px;
            object-fit: cover;
            border-radius: 0.75rem;
            margin: 1vw;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }
        .parallax-bg {
            position: absolute;
            top: 0; left: 0;
            width: 120%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }
        /* Scatter Section */
        .scatter-item {
            position: absolute;
            width: 25vmin;
            height: 35vmin;
            background-size: cover;
            background-position: center;
            border-radius: 0.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            will-change: transform;
        }
    </style>
</head>
<body>

    <!-- 섹션 1: 히어로 & 3D 카드 스택 -->
    <section id="hero-section" class="section section-long">
        <div class="sticky top-0 w-full h-screen flex flex-col justify-center items-center">
            <h1 id="hero-title" class="font-serif-display text-6xl md:text-9xl z-10 text-shadow-lg">Art of Moments</h1>
            <p id="hero-subtitle" class="text-xl md:text-2xl mt-4 z-10">A cup of coffee is a moment of art.</p>
            <div id="card-stack" class="absolute w-full h-full">
                <div class="card" style="background-image: url('https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=600');"></div>
                <div class="card" style="background-image: url('https://images.unsplash.com/photo-1511537190424-bbbab87ac5eb?w=600');"></div>
                <div class="card" style="background-image: url('https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=600');"></div>
                <div class="card" style="background-image: url('https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=600');"></div>
                <div class="card" style="background-image: url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=600');"></div>
            </div>
        </div>
    </section>

    <!-- 섹션 2: 커피 원두 클라우드 -->
    <section id="bean-section" class="section section-long bg-black">
         <div class="sticky top-0 w-full h-screen">
            <div id="bean-container" class="absolute w-full h-full"></div>
            <div id="bean-text" class="relative z-10 text-center">
                 <h2 class="font-serif-display text-5xl md:text-8xl">The Perfect Bean</h2>
                 <p class="mt-4 max-w-2xl mx-auto text-lg">최고의 순간을 위해, 세계 각지에서 엄선된 단 하나의 원두로부터 우리의 이야기는 시작됩니다.</p>
            </div>
         </div>
    </section>

    <!-- 섹션 3: 가로 스크롤 갤러리 (인테리어) -->
    <section id="interior-section-wrapper" class="relative h-screen w-full">
        <div class="section-horizontal">
            <div class="panel justify-start items-center p-12">
                 <div class="max-w-md">
                    <h2 class="font-serif-display text-5xl md:text-7xl">공간이 주는 영감</h2>
                    <p class="mt-6 text-lg">단순히 커피를 마시는 곳이 아닌, 당신의 순간이 예술이 되는 공간을 디자인합니다.</p>
                 </div>
            </div>
            <div class="panel">
                <div class="relative w-full h-full">
                    <div class="parallax-bg" style="background-image: url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=1920&q=80');"></div>
                    <img src="https://images.unsplash.com/photo-1445116572660-236099ec97a0?w=600" class="absolute top-1/4 left-1/4 gallery-image w-1/4 h-auto transform -rotate-6" data-speed="0.8">
                    <img src="https://images.unsplash.com/photo-1512486130939-2c4f79935e4f?w=600" class="absolute bottom-1/4 right-1/4 gallery-image w-1/3 h-auto transform rotate-3" data-speed="1.2">
                </div>
            </div>
             <div class="panel" style="background-image: url('https://images.unsplash.com/photo-1463797221720-6b07e6426c24?w=1920&q=80');">
                 <h2 class="font-serif-display text-5xl md:text-7xl max-w-lg bg-black/50 p-6 rounded-lg backdrop-blur-sm">디테일의 아름다움</h2>
            </div>
            <div class="panel">
                <div class="flex items-center justify-center space-x-8">
                    <img src="https://images.unsplash.com/photo-1559925393-8be0ec4767c8?w=600" class="gallery-image transform translate-y-8 rotate-6">
                    <img src="https://images.unsplash.com/photo-1516450364592-53a9ffa3e7a3?w=600" class="gallery-image transform -translate-y-12 -rotate-4">
                    <img src="https://images.unsplash.com/photo-1587080413959-06b859fb1070?w=600" class="gallery-image transform translate-y-2 rotate-2">
                </div>
            </div>
        </div>
    </section>

    <!-- 섹션 4: 스캐터 이미지 (사람들) -->
    <section id="people-section" class="section section-long bg-black">
        <div class="sticky top-0 w-full h-screen">
            <h2 id="people-title" class="font-serif-display text-6xl md:text-9xl text-outline absolute z-20">The Vibe</h2>
            <div id="scatter-container" class="absolute w-full h-full">
                <!-- JavaScript로 이미지 생성 -->
            </div>
        </div>
    </section>

    <!-- 섹션 5: 외관 & 마무리 -->
    <section id="exterior-section" class="section section-long">
        <div class="sticky top-0 w-full h-screen">
            <div id="exterior-bg" class="absolute w-full h-full bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1571624436279-b272aff752b5?w=1920&q=80');"></div>
            <div id="final-text-container" class="relative z-10 text-center bg-black/60 p-8 rounded-xl backdrop-blur-md">
                <h2 id="final-title" class="font-serif-display text-4xl md:text-6xl"></h2>
                <p id="final-subtitle" class="mt-4 text-lg">We are waiting for you.</p>
            </div>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger);
        
        // --- 전체 스크롤 타임라인 설정 ---
        // 각 섹션은 독립적인 ScrollTrigger를 가지며, 순차적으로 실행됨
        
        // --- 섹션 1: 히어로 & 3D 카드 스택 애니메이션 ---
        function setupHeroSection() {
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#hero-section",
                    start: "top top",
                    end: "bottom top",
                    scrub: 1,
                    pin: true,
                }
            });

            const cards = gsap.utils.toArray("#card-stack .card");
            gsap.set(cards, { 
                top: "50%", left: "50%", xPercent: -50, yPercent: -50,
                transformOrigin: "center center"
            });
            
            // 초기 등장 애니메이션 (스크롤과 무관)
            gsap.from("#hero-title", { duration: 1.5, y: 100, opacity: 0, ease: "power4.out", delay: 0.5 });
            gsap.from("#hero-subtitle", { duration: 1.5, y: 50, opacity: 0, ease: "power4.out", delay: 0.8 });
            gsap.from(cards, {
                duration: 1.5,
                scale: 0,
                opacity: 0,
                stagger: 0.1,
                ease: "power4.out",
                delay: 1.2
            });

            // 스크롤에 따른 3D 카드 스택 애니메이션
            cards.forEach((card, i) => {
                tl.to(card, {
                    z: i * 30, // 3D 깊이감
                    ease: "none"
                }, 0)
                .to(card, {
                    yPercent: -150 - (i * 10),
                    rotateZ: (i % 2 === 0 ? 1 : -1) * (20 - i * 3),
                    rotateX: -45,
                    ease: "power2.inOut"
                }, 0.5);
            });
            
            tl.to(["#hero-title", "#hero-subtitle"], { opacity: 0, duration: 0.5 }, 0.5);
        }

        // --- 섹션 2: 커피 원두 클라우드 애니메이션 ---
        function setupBeanSection() {
            const beanContainer = document.getElementById("bean-container");
            const beanCount = 30;
            for (let i = 0; i < beanCount; i++) {
                let bean = document.createElement("div");
                bean.className = "bean";
                bean.style.backgroundImage = `url('https://images.unsplash.com/photo-1590080665780-6b9c6d501f73?w=200')`;
                beanContainer.appendChild(bean);
            }

            const beans = gsap.utils.toArray(".bean");
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#bean-section",
                    start: "top top",
                    end: "bottom top",
                    scrub: 1,
                    pin: true,
                }
            });

            // 초기 위치 랜덤 설정
            beans.forEach(bean => {
                gsap.set(bean, {
                    x: gsap.utils.random(0, window.innerWidth),
                    y: gsap.utils.random(0, window.innerHeight),
                    scale: gsap.utils.random(0.5, 1.2),
                    opacity: 0,
                });
            });

            tl.to(beans, { opacity: 1, stagger: 0.05, ease: "power2.out" })
              .fromTo("#bean-text", { opacity: 0, scale: 0.8 }, { opacity: 1, scale: 1, ease: "power3.out" }, "<")
              .to(beans, {
                x: window.innerWidth / 2,
                y: window.innerHeight / 2,
                scale: 0,
                opacity: 0,
                duration: 2,
                stagger: 0.02,
                ease: "power3.in"
              }, ">1")
              .to("#bean-text", { opacity: 0, scale: 0.8, ease: "power3.in" }, "<");
        }

        // --- 섹션 3: 가로 스크롤 갤러리 애니메이션 ---
        function setupInteriorSection() {
            const horizontalSection = document.querySelector('.section-horizontal');
            
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#interior-section-wrapper",
                    pin: true,
                    scrub: 1,
                    end: () => "+=" + (horizontalSection.offsetWidth - window.innerWidth)
                }
            });

            tl.to(horizontalSection, {
                x: () => -(horizontalSection.offsetWidth - window.innerWidth),
                ease: "none"
            });

            // 패널 내부 요소들에 대한 개별 애니메이션
            tl.from("#interior-section-wrapper .panel:nth-child(1) h2", { x: -100, opacity: 0, ease: "power2.out" }, 0);
            
            const images1 = gsap.utils.toArray("#interior-section-wrapper .panel:nth-child(2) .gallery-image");
            tl.from(images1, { y: 200, opacity: 0, stagger: 0.1, ease: "power3.out" }, 0.5);

            // 패럴랙스 효과
            gsap.utils.toArray("[data-speed]").forEach(el => {
                gsap.to(el, {
                    x: (i, target) => -(target.getAttribute("data-speed") * 100),
                    ease: "none",
                    scrollTrigger: {
                        trigger: "#interior-section-wrapper",
                        start: "top top",
                        end: "bottom bottom",
                        scrub: 2
                    }
                });
            });
            
            tl.from("#interior-section-wrapper .panel:nth-child(3) h2", { scale: 0.5, opacity: 0, ease: "back.out(1.7)" }, 1.5);

            const images2 = gsap.utils.toArray("#interior-section-wrapper .panel:nth-child(4) .gallery-image");
            tl.from(images2, { scale: 0, rotate: 180, opacity: 0, stagger: 0.15, ease: "power3.out" }, 2.5);
        }

        // --- 섹션 4: 스캐터 이미지 애니메이션 ---
        function setupPeopleSection() {
            const scatterContainer = document.querySelector("#scatter-container");
            const peopleImages = [
                'https://images.unsplash.com/photo-1542838132-92c53300491e?w=600',
                'https://images.unsplash.com/photo-1521017432531-fbd92d768814?w=600',
                'https://images.unsplash.com/photo-1521791055366-0d553872125f?w=600',
                'https://images.unsplash.com/photo-1485182708500-e8f1f318ba72?w=600',
                'https://images.unsplash.com/photo-1565688534245-05d6b5be184a?w=600',
                'https://images.unsplash.com/photo-1498804103079-a6351b050096?w=600',
                'https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=600',
                'https://images.unsplash.com/photo-1544787219-7f47ccb76574?w=600',
                'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=600'
            ];
            
            peopleImages.forEach(url => {
                let item = document.createElement("div");
                item.className = "scatter-item";
                item.style.backgroundImage = `url(${url})`;
                scatterContainer.appendChild(item);
            });

            const items = gsap.utils.toArray(".scatter-item");
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#people-section",
                    pin: true,
                    scrub: 1,
                    start: "top top",
                    end: "+=200%"
                }
            });

            // 1. 이미지들이 외부에서 날아와 중앙에 모임
            items.forEach(item => {
                gsap.set(item, {
                    x: gsap.utils.random(-100, 100) + "vw",
                    y: gsap.utils.random(-100, 100) + "vh",
                    rotate: gsap.utils.random(-360, 360)
                });
            });

            tl.to(items, {
                x: "50vw",
                y: "50vh",
                xPercent: -50,
                yPercent: -50,
                rotate: 0,
                stagger: {
                    each: 0.1,
                    from: "random"
                },
                ease: "power2.inOut"
            })
            // 2. 콜라주 형태로 펼쳐짐
            .to(items, {
                x: () => gsap.utils.random(20, 80) + "vw",
                y: () => gsap.utils.random(15, 85) + "vh",
                rotate: () => gsap.utils.random(-30, 30),
                scale: 1,
                stagger: 0.05,
                ease: "power3.out"
            }, ">-0.5");
            
            tl.fromTo("#people-title", { opacity: 0 }, { opacity: 1, duration: 1 }, "<0.5")
              .to("#people-title", { opacity: 0, duration: 1}, ">1");
              
            // 3. 다시 사라짐
            tl.to(items, {
                opacity: 0,
                scale: 0.5,
                filter: "blur(20px)",
                stagger: 0.05,
                ease: "power2.in"
            });
        }

        // --- 섹션 5: 외관 & 마무리 애니메이션 ---
        function setupExteriorSection() {
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: "#exterior-section",
                    pin: true,
                    scrub: 1,
                    start: "top top",
                    end: "+=150%"
                }
            });
            
            const backgrounds = [
                "https://images.unsplash.com/photo-1505275350441-83dcda8eeef5?w=1920&q=80",
                "https://images.unsplash.com/photo-1464207687429-7505649dae38?w=1920&q=80"
            ];
            
            gsap.set("#final-text-container", { opacity: 0 });
            gsap.set("#exterior-bg", { scale: 1.2 });

            tl.to("#exterior-bg", { scale: 1, ease: "none" });

            backgrounds.forEach((bg) => {
                tl.to("#exterior-bg", {
                    opacity: 0.5,
                    duration: 0.5,
                    onComplete: () => {
                        document.querySelector("#exterior-bg").style.backgroundImage = `url(${bg})`;
                    }
                })
                .to("#exterior-bg", { opacity: 1, duration: 0.5 });
            });

            tl.to("#final-text-container", { opacity: 1, duration: 1 }, ">-1");
            
            // 타이핑 효과
            const finalTitle = document.querySelector("#final-title");
            const text = "Find Your Moment";
            tl.to(finalTitle, {
                text: {
                    value: text,
                    delimiter: "",
                },
                duration: text.length * 0.1,
                ease: "none"
            });
        }
        
        // --- 모든 섹션 애니메이션 실행 ---
        // 페이지가 로드되면 각 섹션의 설정 함수를 호출
        window.addEventListener("load", () => {
            setupHeroSection();
            setupBeanSection();
            setupInteriorSection();
            setupPeopleSection();
            setupExteriorSection();
        });

    </script>
</body>
</html>

